/*
	 * smartresize: debounced resize event for jQuery
	 *
	 * latest version and complete README available on Github:
	 * https://github.com/louisremi/jquery.smartresize.js
	 *
	 * Copyright 2011 @louis_remi
	 * Licensed under the MIT license.
	 */
(function(a,b,c){var d=b.event,e;d.special.smartresize={setup:function(){b(this).bind("resize",d.special.smartresize.handler)},teardown:function(){b(this).unbind("resize",d.special.smartresize.handler)},handler:function(a,b){var c=this,d=arguments;a.type="smartresize",e&&clearTimeout(e),e=setTimeout(function(){jQuery.event.handle.apply(c,d)},b==="execAsap"?0:100)}},b.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])},b.Accordion=function(a,c){this.$el=b(c),this.$items=this.$el.children("ul").children("li.st-content-wrapper"),this.itemsCount=this.$items.length,this._init(a)},b.Accordion.defaults={open:-1,oneOpenedItem:!1,speed:600,easing:"easeInOutExpo",scrollSpeed:900,scrollEasing:"easeInOutExpo"},b.Accordion.prototype={_init:function(a){this.options=b.extend(!0,{},b.Accordion.defaults,a),this._validate(),this.current=this.options.open,this.$items.find("div.st-content").hide(),this._saveDimValues(),this.current!=-1&&this._toggleItem(this.$items.eq(this.current)),this._initEvents()},_saveDimValues:function(){this.$items.each(function(){var a=b(this);a.data({originalHeight:a.find("a:first").height(),offsetTop:a.offset().top})})},_validate:function(){if(this.options.open<-1||this.options.open>this.itemsCount-1)this.options.open=-1},_initEvents:function(){var c=this;this.$items.find("a:first").bind("click.slideaccordion",function(a){var d=b(this).parent();return c.options.oneOpenedItem&&c._isOpened()&&c.current!==d.index()&&c._toggleItem(c.$items.eq(c.current)),c._toggleItem(d),!1}),b(a).bind("smartresize.slideaccordion",function(a){c._saveDimValues(),c.$el.find("li.st-open").each(function(){var a=b(this);a.css("height",a.data("originalHeight")+a.find("div.st-content").outerHeight(!0))}),c._isOpened()&&c._scroll()})},_isOpened:function(){return this.$el.find("li.st-open").length>0},_toggleItem:function(a){var b=a.find("div.st-content");a.hasClass("st-open")?(this.current=-1,b.stop(!0,!0).fadeOut(this.options.speed),a.removeClass("st-open").stop().animate({height:a.data("originalHeight")},this.options.speed,this.options.easing)):(this.current=a.index(),b.stop(!0,!0).fadeIn(this.options.speed),a.addClass("st-open").stop().animate({height:a.data("originalHeight")+b.outerHeight(!0)},this.options.speed,this.options.easing),this._scroll(this))},_scroll:function(a){var a=a||this,c;a.current!==-1?c=a.current:c=a.$el.find("li.st-open:last").index(),b("html, body").stop().animate({scrollTop:a.options.oneOpenedItem?a.$items.eq(c).data("offsetTop"):a.$items.eq(c).offset().top},a.options.scrollSpeed,a.options.scrollEasing)}};var f=function(a){this.console&&console.error(a)};b.fn.slideaccordion=function(a){if(typeof a=="string"){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var d=b.data(this,"slideaccordion");if(!d){f("cannot call methods on slideaccordion prior to initialization; attempted to call method '"+a+"'");return}if(!b.isFunction(d[a])||a.charAt(0)==="_"){f("no such method '"+a+"' for slideaccordion instance");return}d[a].apply(d,c)})}else this.each(function(){var c=b.data(this,"slideaccordion");c||b.data(this,"slideaccordion",new b.Accordion(a,this))});return this}})(window,jQuery),$(function(){$(".slide-to-top.all-closed").slideaccordion({oneOpenedItem:!0,open:-1})}),$(function(){$(".slide-to-top.first-pane-open").slideaccordion({oneOpenedItem:!0,open:0})});