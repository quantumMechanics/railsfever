/*
 * jQuery EasyTabs plugin 3.1.1
 *
 * Copyright (c) 2010-2011 Steve Schwartz (JangoSteve)
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Date: Tue Jan 26 16:30:00 2012 -0500
 */
(function(a){a.easytabs=function(b,c){var d=this,e=a(b),f={animate:!0,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"normal",tabs:"> ul > li",updateHash:!0,cycle:!1,collapsible:!1,collapsedClass:"collapsed",collapsedByDefault:!0,uiTabs:!1,transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInEasing:"swing",transitionOutEasing:"swing",transitionCollapse:"slideUp",transitionUncollapse:"slideDown",transitionCollapseEasing:"swing",transitionUncollapseEasing:"swing",containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:!0,panelContext:e},g,h,i,j,k,l={fast:200,normal:400,slow:600},m;d.init=function(){d.settings=m=a.extend({},f,c),m.uiTabs&&(m.tabActiveClass="ui-tabs-selected",m.containerClass="ui-tabs ui-widget ui-widget-content ui-corner-all",m.tabsClass="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all",m.tabClass="ui-state-default ui-corner-top",m.panelClass="ui-tabs-panel ui-widget-content ui-corner-bottom"),m.collapsible&&c.defaultTab!==undefined&&c.collpasedByDefault===undefined&&(m.collapsedByDefault=!1),typeof m.animationSpeed=="string"&&(m.animationSpeed=l[m.animationSpeed]),a("a.anchor").remove().prependTo("body"),e.data("easytabs",{}),d.setTransitions(),d.getTabs(),o(),p(),r(),v(),w(),e.attr("data-easytabs",!0)},d.setTransitions=function(){i=m.animate?{show:m.transitionIn,hide:m.transitionOut,speed:m.animationSpeed,collapse:m.transitionCollapse,uncollapse:m.transitionUncollapse,halfSpeed:m.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0}},d.getTabs=function(){var b;d.tabs=e.find(m.tabs),d.panels=a(),d.tabs.each(function(){var c=a(this),e=c.children("a"),f=c.children("a").data("target");c.data("easytabs",{}),f!==undefined&&f!==null?c.data("easytabs").ajax=e.attr("href"):f=e.attr("href"),f=f.match(/#([^\?]+)/)[0].substr(1),b=m.panelContext.find("#"+f),b.length?(b.data("easytabs",{position:b.css("position"),visibility:b.css("visibility")}),b.not(m.panelActiveClass).hide(),d.panels=d.panels.add(b),c.data("easytabs").panel=b):d.tabs=d.tabs.not(c)})},d.selectTab=function(a,b){var c=window.location,e=c.hash.match(/^[^\?]*/)[0],f=a.parent().data("easytabs").panel,g=a.parent().data("easytabs").ajax;m.collapsible&&!k&&(a.hasClass(m.tabActiveClass)||a.hasClass(m.collapsedClass))?d.toggleTabCollapse(a,f,g,b):!a.hasClass(m.tabActiveClass)||!f.hasClass(m.panelActiveClass)?s(a,f,g,b):m.cache||s(a,f,g,b)},d.toggleTabCollapse=function(a,b,c,f){d.panels.stop(!0,!0),n(e,"easytabs:before",[a,b,m])&&(d.tabs.filter("."+m.tabActiveClass).removeClass(m.tabActiveClass).children().removeClass(m.tabActiveClass),a.hasClass(m.collapsedClass)?(c&&(!m.cache||!a.parent().data("easytabs").cached)&&(e.trigger("easytabs:ajax:beforeSend",[a,b]),b.load(c,function(c,d,f){a.parent().data("easytabs").cached=!0,e.trigger("easytabs:ajax:complete",[a,b,c,d,f])})),a.parent().removeClass(m.collapsedClass).addClass(m.tabActiveClass).children().removeClass(m.collapsedClass).addClass(m.tabActiveClass),b.addClass(m.panelActiveClass)[i.uncollapse](i.speed,m.transitionUncollapseEasing,function(){e.trigger("easytabs:midTransition",[a,b,m]),typeof f=="function"&&f()})):(a.addClass(m.collapsedClass).parent().addClass(m.collapsedClass),b.removeClass(m.panelActiveClass)[i.collapse](i.speed,m.transitionCollapseEasing,function(){e.trigger("easytabs:midTransition",[a,b,m]),typeof f=="function"&&f()})))},d.matchTab=function(a){return d.tabs.find("[href='"+a+"'],[data-target='"+a+"']").first()},d.matchInPanel=function(a){return a?d.panels.filter(":has("+a+")").first():[]},d.selectTabFromHashChange=function(){var a=window.location.hash.match(/^[^\?]*/)[0],b=d.matchTab(a),c;m.updateHash&&(b.length?(k=!0,d.selectTab(b)):(c=d.matchInPanel(a),c.length?(a="#"+c.attr("id"),b=d.matchTab(a),k=!0,d.selectTab(b)):!g.hasClass(m.tabActiveClass)&&!m.cycle&&(a===""||d.matchTab(j).length||e.closest(a).length)&&(k=!0,d.selectTab(h))))},d.cycleTabs=function(b){m.cycle&&(b%=d.tabs.length,$tab=a(d.tabs[b]).children("a").first(),k=!0,d.selectTab($tab,function(){setTimeout(function(){d.cycleTabs(b+1)},m.cycle)}))},d.publicMethods={select:function(b){var c;(c=d.tabs.filter(b)).length===0?(c=d.tabs.find("a[href='"+b+"']")).length===0&&(c=d.tabs.find("a"+b)).length===0&&(c=d.tabs.find("[data-target='"+b+"']")).length===0&&(c=d.tabs.find("a[href$='"+b+"']")).length===0&&a.error("Tab '"+b+"' does not exist in tab set"):c=c.children("a").first(),d.selectTab(c)}};var n=function(b,c,d){var e=a.Event(c);return b.trigger(e,d),e.result!==!1},o=function(){e.addClass(m.containerClass),d.tabs.parent().addClass(m.tabsClass),d.tabs.addClass(m.tabClass),d.panels.addClass(m.panelClass)},p=function(){var b=window.location.hash.match(/^[^\?]*/)[0],c=d.matchTab(b).parent(),e;c.length===1?(g=c,m.cycle=!1):(e=d.matchInPanel(b),e.length?(b="#"+e.attr("id"),g=d.matchTab(b).parent()):(g=d.tabs.parent().find(m.defaultTab),g.length===0&&a.error("The specified default tab ('"+m.defaultTab+"') could not be found in the tab set."))),h=g.children("a").first(),q(c)},q=function(b){var c,d;m.collapsible&&b.length===0&&m.collapsedByDefault?g.addClass(m.collapsedClass).children().addClass(m.collapsedClass):(c=a(g.data("easytabs").panel),d=g.data("easytabs").ajax,d&&(!m.cache||!g.data("easytabs").cached)&&(e.trigger("easytabs:ajax:beforeSend",[h,c]),c.load(d,function(a,b,d){g.data("easytabs").cached=!0,e.trigger("easytabs:ajax:complete",[h,c,a,b,d])})),g.data("easytabs").panel.show().addClass(m.panelActiveClass),g.addClass(m.tabActiveClass).children().addClass(m.tabActiveClass))},r=function(){d.tabs.children("a").bind("click.easytabs",function(b){m.cycle=!1,k=!1,d.selectTab(a(this)),b.preventDefault()})},s=function(a,b,c,f){d.panels.stop(!0,!0);if(n(e,"easytabs:before",[a,b,m])){var g=d.panels.filter(":visible"),h=b.parent(),l,o,p,q,r=window.location.hash.match(/^[^\?]*/)[0];m.animate&&(l=t(b),o=g.length?u(g):0,p=l-o),j=r,q=function(){e.trigger("easytabs:midTransition",[a,b,m]),m.animate&&m.transitionIn=="fadeIn"&&p<0&&h.animate({height:h.height()+p},i.halfSpeed).css({"min-height":""}),m.updateHash&&!k?window.location.hash="#"+b.attr("id"):k=!1,b[i.show](i.speed,m.transitionInEasing,function(){h.css({height:"","min-height":""}),e.trigger("easytabs:after",[a,b,m]),typeof f=="function"&&f()})},c&&(!m.cache||!a.parent().data("easytabs").cached)&&(e.trigger("easytabs:ajax:beforeSend",[a,b]),b.load(c,function(c,d,f){a.parent().data("easytabs").cached=!0,e.trigger("easytabs:ajax:complete",[a,b,c,d,f])})),m.animate&&m.transitionOut=="fadeOut"&&(p>0?h.animate({height:h.height()+p},i.halfSpeed):h.css({"min-height":h.height()})),d.tabs.filter("."+m.tabActiveClass).removeClass(m.tabActiveClass).children().removeClass(m.tabActiveClass),d.tabs.filter("."+m.collapsedClass).removeClass(m.collapsedClass).children().removeClass(m.collapsedClass),a.parent().addClass(m.tabActiveClass).children().addClass(m.tabActiveClass),d.panels.filter("."+m.panelActiveClass).removeClass(m.panelActiveClass),b.addClass(m.panelActiveClass),g.length?g[i.hide](i.speed,m.transitionOutEasing,q):b[i.uncollapse](i.speed,m.transitionUncollapseEasing,q)}},t=function(b){if(b.data("easytabs")&&b.data("easytabs").lastHeight)return b.data("easytabs").lastHeight;var c=b.css("display"),d=b.wrap(a("<div>",{position:"absolute",visibility:"hidden",overflow:"hidden"})).css({position:"relative",visibility:"hidden",display:"block"}).outerHeight();return b.unwrap(),b.css({position:b.data("easytabs").position,visibility:b.data("easytabs").visibility,display:c}),b.data("easytabs").lastHeight=d,d},u=function(a){var b=a.outerHeight();return a.data("easytabs")?a.data("easytabs").lastHeight=b:a.data("easytabs",{lastHeight:b}),b},v=function(){typeof a(window).hashchange=="function"?a(window).hashchange(function(){d.selectTabFromHashChange()}):a.address&&typeof a.address.change=="function"&&a.address.change(function(){d.selectTabFromHashChange()})},w=function(){var a;m.cycle&&(a=d.tabs.index(g),setTimeout(function(){d.cycleTabs(a+1)},m.cycle))};d.init()},a.fn.easytabs=function(b){var c=arguments;return this.each(function(){var d=a(this),e=d.data("easytabs");undefined===e&&(e=new a.easytabs(this,b),d.data("easytabs",e));if(e.publicMethods[b])return e.publicMethods[b](Array.prototype.slice.call(c,1))})}})(jQuery);